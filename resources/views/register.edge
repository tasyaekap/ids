<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="http://cdn.webix.com/7.0/webix.css" type="text/css">
    <script src="http://cdn.webix.com/7.0/webix.js" type="text/javascript"></script>
    <link rel="stylesheet" href="https://cdn.materialdesignicons.com/2.7.94/css/materialdesignicons.css" type="text/css" charset="utf-8">

    <title>Login Page</title>
</head>
<body>
    <div id="reg">
        <script> 
            var token = '';
            
            var awb = "http://localhost:3333/awb";
            
            var clear = function(){
                $$("frmreg").clear();
            } 
            var onreg = function(){
            var isi = $$('frmreg').getValues();
            //console.log(isi);
            var url = "http://localhost:3333/register"
            webix.ajax().post(url, isi ).then(function(data){
                // dataa = data.json();
                // user = dataa.user.id
                // token = "Bearer " + dataa.auth.token
                // webix.storage.cookie.put("auth", token);
                webix.message("Berhasil daftar! silahkan login untuk melanjutkan!")
                window.open("/","_self")
            });
            }

            var reg =      
            {
                rows:[
                    {},
                    {cols:[
                    { },
                    {  container:"reg",
                       id: "frmreg",
                       view:"form",
                       croll:false,
                       width:300,
                       css: { margin:"auto" },
                       elements:[
                            {view:"text", label:"Username" , name: "username" },
                            {view:"text", label:"Email" , name: "email" },
                            {view:"text", type:"password", label:"Password" , name: "password" },
                            
                                            { margin:5, cols:[
                                                { view:"button", label:"Register" , click: onreg },
                                                { view:"button", label:"Cancel", click: clear }
                                            ]}
                                            ]},
                    { }
                    ]},
                {}
                ]
                };

            webix.ui(reg);
        </script>
    </div>
</body>
</html>